
import spiralcraft.util.PathPattern;
import spiralcraft.util.Path;
import spiralcraft.codec.text.Base64Codec;

var assertPatternMatch(pattern,path)
{
  return assert(new PathPattern(pattern).matches(new Path(path,'/'))
        ,"Pattern ["+pattern+"] matches path ["+path+"]"
        );
}



print(assertPatternMatch("CVS","CVS"));
print(assertPatternMatch("**/CVS","CVS"));
print(assertPatternMatch("**/CVS/","/CVS"));


test("new Path(\"/\",'/').firstElement()",null);
test("new Path(\"/check\",'/').firstElement()","check");
test("new Path(\"/check/\",'/').firstElement()","check");
test("new Path(\"/x/y/z/\",'/').format('/')","/x/y/z/");
test("new Path(\"x/y/z/\",'/').format('/')","x/y/z/");
test("new Path(\"/x/y/z\",'/').format('/')","/x/y/z");
test("new Path(\"x/y/z\",'/').format('/')","x/y/z");

test("Base64Codec.encodeAsciiString(\"admin:change!me\")"
    ,"YWRtaW46Y2hhbmdlIW1l"
    );
    
test("new String(Base64Codec.decodeAsciiString(\"YWRtaW46Y2hhbmdlIW1l\"))"
    ,"admin:change!me"
    );