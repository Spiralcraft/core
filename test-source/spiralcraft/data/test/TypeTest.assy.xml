<task:Chain
  xmlns:task="class:/spiralcraft/task/"
  xmlns:query="class:/spiralcraft/data/query/"
  xmlns:dtask="class:/spiralcraft/data/task/"
  xmlns:test="class:/spiralcraft/test/"
  xmlns:example="class:/spiralcraft/data/test/example/"
  xmlns:std="class:/spiralcraft/data/types/standard/"
  >
  <chain>
 
    <task:Sequence>
      <scenarios>
    
        <test:Stub>
          <name>shortDate
          </name>
          <messageX>[@example:USDate].type.@cast([@std:DateType]).fromString("12/28/2010")
          </messageX>
          <conditionX>[@example:USDate].type.@cast([@std:DateType])
                        .fromString("12/28/2010").toString()
                      =="Tue Dec 28 00:00:00 PST 2010"
          </conditionX>
        </test:Stub>

        <dtask:Fetch>
          
          <query>
            <query:Scan>
              <type x="[@example:Customer].type"/>
            </query:Scan>
          </query>
          
          <chain>
            <test:Assertion>
              <name>scenario method pre-test
              </name>
              <subjectX>[example:Customer.list][0].score
              </subjectX>
              <testX>.==20.216F
              </testX>
            </test:Assertion>

            <task:Exec>
              <commandX>[example:Customer.list][0].score1().@tune("TaskMethod 1")
              </commandX>
            </task:Exec>

            <test:Assertion>
              <name>scenario method post-test
              </name>
              <subjectX>[example:Customer.list][0].score
              </subjectX>
              <testX>.==21.216F
              </testX>
            </test:Assertion>
            
            <task:Exec>
              <commandX>[example:Customer.list][0].score1().@tune("TaskMethod 2")
              </commandX>
            </task:Exec>

            <test:Assertion>
              <name>scenario method post-test
              </name>
              <subjectX>[example:Customer.list][0].score
              </subjectX>
              <testX>.==22.216F
              </testX>
            </test:Assertion>
            
            <task:Exec>
              <commandX>[example:Customer.list][0].score(10).@tune("TaskMethod 3")
              </commandX>
            </task:Exec>
                        
            <test:Assertion>
              <name>parameterized scenario method post-test
              </name>
              <subjectX>[example:Customer.list][0].score
              </subjectX>
              <testX>.==32.216F
              </testX>
            </test:Assertion>
            
          </chain>
        </dtask:Fetch>
                
      </scenarios>
      
    </task:Sequence>
  </chain>
        
</task:Chain>
